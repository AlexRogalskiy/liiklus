plugins {
    id "java"
}

publishing {
    publications {
        mavenJava(MavenPublication) { publication ->
            artifactId = "liiklus-bom"
            artifacts = []

            pom.withXml {
                asNode().dependencyManagement.replaceNode {}
                def dependencyManagementNode = asNode().appendNode('dependencyManagement').appendNode('dependencies')

                rootProject.subprojects.findAll { it != project }.each { subProject ->
                    dependencyManagementNode.appendNode('dependency').with {
                        appendNode('groupId', subProject.group)
                        appendNode('artifactId',subProject.name)
                        appendNode('version', subProject.version)
                    }
                }
            }
        }
    }
}
